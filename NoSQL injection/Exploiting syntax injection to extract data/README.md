# NoSQL ma'lumotlar bazasiga sintaksis in'ektsiyasi orqali ma'lumotlarni olish 

Quyida siz bergan matn Markdown formatiga o‘girildi. Mualliflikda keltirilgan misollar va foydali yuklar (payload) saqlangan — ehtiyotkorlik bilan va faqat ta'lim / himoya maqsadida foydalaning. Noqonuniy foydalanish yomon oqibatlarga olib kelishi mumkin.

---

## Kirish

Ko‘pgina NoSQL ma’lumotlar bazalarida ba’zi so‘rov operatorlari yoki funksiyalari cheklangan JavaScript kodini baholashi mumkin. Masalan, MongoDB`ning `\$where`operatori va`mapReduce()\` funksiyasi bunga misoldir. Agar zaif dastur ushbu operatorlardan foydalansa, ma’lumotlar bazasi so‘rov ichida berilgan JavaScript ifodalarini bajarishi mumkin — bu esa ma’lumotlarni chiqarish uchun JavaScript in’ektsiyasidan foydalanishga imkon beradi.

---

## Misol: zaif `lookup` endpoint

Zaif dastur quyidagi kabi URL so‘rovini amalga oshiradi:

```
https://insecure-website.com/user/lookup?username=admin
```

Server esa bu so‘rovni quyidagi NoSQL so‘roviga aylantirishi mumkin:

```json
{"$where": "this.username == 'admin'"}
```

`$where` ishlatilgani sababli, so‘rovga JavaScript ifodalarini kiritish orqali nozik ma’lumotlarni olishga harakat qilish mumkin.

---

## Belgilar bo‘yicha parolni ajratib olish — misol yuk (payload)

Quyidagi foydali yuk birinchi belgi orqali tekshiradi:

```
admin' && this.password[0] == 'a' || 'a'=='b
```

Ushbu ifoda parol satrining birinchi belgisini tekshiradi — natijaga qarab, belgilar bo‘yicha ajratib olish mumkin.

---

## `match()` funksiyasidan foydalanish — misol

Parolda raqam bor-yo‘qligini aniqlash uchun `match()` funksiyasidan foydalanish mumkin:

```
admin' && this.password.match(/\d/) || 'a'=='b
```

---

## Maydon (field) nomlarini aniqlash

MongoDB sxema talab qilmaydigan yarim-tuzilmali hujjatlar bilan ishlaydi, shuning uchun to‘plamdagi mavjud maydonlarni aniqlash kerak bo‘lishi mumkin.

Parol maydoni mavjud yoki mavjud emasligini tekshirish uchun misol yuk:

```
https://insecure-website.com/user/lookup?username=admin'+%26%26+this.password!%3d'
```

Yoki maydon nomlarini sinash uchun:

```
admin' && this.username!=' admin' && this.foo!='
```

Agar `password` maydoni mavjud bo‘lsa, javob `username` (mavjud maydon) uchun o‘xshash bo‘ladi, ammo mavjud bo‘lmagan `foo` maydoni uchun javobdan farq qiladi.

---

## Lug‘at hujumi (dictionary attack) o‘rniga — maydon nomlarini aniqlash

Agar turli maydon nomlarini sinab ko‘rishni xohlasangiz, so‘zlar ro‘yxatidan (dictionary) foydalanib lug‘at hujumini amalga oshirishingiz mumkin. Muqobil ravishda, NoSQL operator in’ektsiyasidan belgilarga asoslanib maydon nomlarini ajratib olish uchun ham foydalanish mumkin — bu lug‘at hujumini taxmin qilmasdan (yoki amalga oshirmasdan) maydon nomlarini aniqlash imkonini beradi.

---

## Eslatma va tavsiyalar (axloqiy va himoya nuqtai nazari)

* Berilgan misollar va yuklar faqat ta’limiy va himoya (defensive security) maqsadlarda ishlatilishi lozim. Noqonuniy kirish va ma’lumot o‘g‘irlash jinoyat hisoblanadi.
* Agar siz veb-ilovangizni himoya qilishni istasangiz, quyidagilarni amalga oshiring (yuqoridagi hujum usullarini o‘qitish maqsadida yuqoridagi misollar keltirilgan):

  * `$where` yoki JavaScript baholovchi operatorlardan imkon qadar voz keching.
  * Ma’lumotlar bazasi so‘rovlarini parametrizatsiya qiling va foydalanuvchi kirituvini tekshiring/filtrlashni qat’iy qiling.
  * Dastur loglarida shubhali so‘rovlar va kirituvlarni kuzatib boring.
  * Minimal huquq (least privilege) prinsipini qo‘llang: ilova foydalanuvchi hisobi ma’lumotlarni faqat zaruriy darajada o‘qiy olsin.
  * Penetratsion test (pentest) va kod auditi o‘tkazing.

---

## Xulosa

* `$where` kabi NoSQL operatorlari JavaScript ifodalarini baholasa, ular potentsial hujum vektori hisoblanadi.
* Belgilar bo‘yicha (character-by-character) va `match()` kabi funksiyalar orqali ma'lumotlarni ajratib olish mumkin.
* Maydon nomlarini aniqlash uchun ham NoSQL in’ektsiyasidan foydalanish mumkin.
* Har doim axloqiy qoidalar va qonunlarni hurmat qiling; tizimlarni himoya qilish va testlash uchun faqat ruxsat olingan muhitlarni ishlating.

